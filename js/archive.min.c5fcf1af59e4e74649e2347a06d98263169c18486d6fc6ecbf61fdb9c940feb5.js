(function(){function t(){var n=0,t={},e,o=window.location.search.substring(1),s=o.split("&");for(n=0;n<s.length;n++)e=s[n].split("="),typeof t[e[0]]=="undefined"?t[e[0]]=e[1]:typeof t[e[0]]=="string"?t[e[0]]=[t[e[0]],e[1]]:t[e[0]].push(e[1]);return t}var e=function(){var e=window.location.href.split("?")[0];return function(t){typeof t=="string"?window.history.replaceState(null,'',e+t):window.history.replaceState(null,'',e)}}();$(document).ready(function(){i=$(".js-tags"),f=i.find(".tag-button"),a=i.find(".tag-button--all"),r=$(".js-result"),s=r.find("section"),n=[],o=null,u=[],d=!1,s.each(function(){n.push($(this).find(".item"))});function m(){var e,t=0;for(e=0;e<s.length;e++)u.push(t),t+=s.eq(e).find(".item").length;u.push(t)}function h(e){if(!e)return a;var t=f.filter('[data-encode="'+e+'"]');return t.length===0?a:t}function c(e){e&&(e.addClass("focus"),o&&!o.is(e)&&o.removeClass("focus"),o=e)}function l(a,f){var i={},m,t,o,u,l,p;for(t=0;t<n.length;t++){m=n[t];for(o=0;o<m.length;o++)if(a===''||a===void 0)i[t]||(i[t]={}),i[t][o]=!0;else{p=m.eq(o).data("tags").split(",");for(u=0;u<p.length;u++)if(p[u]===a){i[t]||(i[t]={}),i[t][o]=!0;break}}}for(t=0;t<n.length;t++){i[t]&&s.eq(t).removeClass("d-none"),i[t]||s.eq(t).addClass("d-none");for(o=0;o<n[t].length;o++)i[t]&&i[t][o]?n[t].eq(o).removeClass("d-none"):n[t].eq(o).addClass("d-none")}d||(r.removeClass("d-none"),d=!0),f?(c(f),l=f.attr("data-encode"),l===''||typeof l!="string"?e():e("?tag="+l)):c(h(a))}var i,f,a,r,s,n,o,u,d,p=t(),g=p.tag;m(),l(g),i.on("click","a",function(){l($(this).data("encode"),$(this))})})})()